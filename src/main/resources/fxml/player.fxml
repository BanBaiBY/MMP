<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.Slider?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.media.MediaView?>
<?import javafx.geometry.Pos?>
<?import javafx.scene.shape.Polygon?>
<?import javafx.scene.shape.Rectangle?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.image.ImageView?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.text.Text?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.ComboBox?>

<!-- æ’­æ”¾å™¨ä¸»å¸ƒå±€ï¼šé‡‡ç”¨BorderPaneåˆ†ä¸Šã€ä¸­ã€ä¸‹ä¸‰åŒºåŸŸå¸ƒå±€ï¼Œä¿ç•™ä¸»é¢˜åˆ‡æ¢èƒ½åŠ›ï¼Œæ•´åˆä¼˜åŒ–å¸ƒå±€ -->
<BorderPane xmlns="http://javafx.com/javafx/17.0.17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.multimediaplayer.PlayerController"
            prefWidth="800.0"
            prefHeight="600.0"
            fx:id="rootPane">

    <!-- é¡¶éƒ¨å¯¼èˆªæ ï¼šæ•´åˆFXML1ä¸»é¢˜åˆ‡æ¢ + FXML2æ–°å¢žsettingsBtnï¼Œç§»é™¤é¡¶éƒ¨remove/æ¸…ç©ºæŒ‰é’® -->
    <top>
        <HBox fx:id="topNavi"
              spacing="15.0"
              alignment="CENTER_LEFT"
              prefHeight="40.0"
              minHeight="40.0">
            <padding>
                <Insets top="0" right="10" bottom="0" left="10"/>
            </padding>
            <children>
                <!-- é€‰æ‹©åª’ä½“æ–‡ä»¶æŒ‰é’® -->
                <Button fx:id="openBtn"
                        text="ðŸ“‚ é€‰æ‹©åª’ä½“æ–‡ä»¶"
                        prefWidth="120.0"
                        prefHeight="30.0"/>

                <!-- FXML2æ–°å¢žï¼šè®¾ç½®æŒ‰é’® -->
                <Button fx:id="settingsBtn"
                        text="è®¾ç½®"
                        prefWidth="80.0"
                        prefHeight="30.0"/>

                <!-- æ’­æ”¾åˆ—è¡¨å±•å¼€/æŠ˜å åˆ‡æ¢æŒ‰é’® -->
                <ToggleButton fx:id="playlistToggleBtn"
                              text="â‰¡"
                              prefWidth="40.0"
                              prefHeight="30.0"
                              alignment="CENTER"/>

                <!-- å½“å‰æ’­æ”¾æ–‡ä»¶åç§°æ˜¾ç¤ºæ ‡ç­¾ -->
                <Label fx:id="fileNameLabel"
                       text="æœªé€‰æ‹©æ–‡ä»¶"
                       HBox.hgrow="ALWAYS"/>

                <!-- FXML1ä¿ç•™ï¼šä¸»é¢˜åˆ‡æ¢ä¸‹æ‹‰æ¡†å®¹å™¨ -->
                <HBox alignment="CENTER" spacing="5.0">
                    <Label text="ä¸»é¢˜ï¼š"/>
                    <ComboBox fx:id="themeComboBox"
                              prefWidth="120.0"
                              prefHeight="30.0"/>
                </HBox>
            </children>
        </HBox>
    </top>

    <!-- ä¸­é—´æ ¸å¿ƒåŒºåŸŸï¼šæ•´åˆFXML2æ’­æ”¾åˆ—è¡¨åº•éƒ¨æ“ä½œæŒ‰é’®ï¼Œä¿ç•™åŽŸæœ‰åª’ä½“æ’­æ”¾åŒº -->
    <center>
        <StackPane minWidth="0" minHeight="0">
            <!-- åª’ä½“æ’­æ”¾å®¹å™¨ï¼šæ‰¿è½½è§†é¢‘/éŸ³é¢‘æ’­æ”¾ã€èƒŒæ™¯å›¾ã€é®ç½©å’Œä¸­å¿ƒæ’­æ”¾æŒ‰é’® -->
            <StackPane fx:id="mediaContainer"
                       minWidth="0"
                       minHeight="0">
                <alignment>
                    <Pos fx:constant="CENTER"/>
                </alignment>
                <children>
                    <!-- åª’ä½“è§†å›¾ï¼šç”¨äºŽæ˜¾ç¤ºè§†é¢‘å†…å®¹ï¼Œè‡ªåŠ¨é€‚é…å®¹å™¨å¤§å° -->
                    <MediaView fx:id="mediaView"
                               preserveRatio="true"
                               fitWidth="${mediaContainer.width}"
                               fitHeight="${mediaContainer.height}"/>
                    <!-- é»‘è‰²é®ç½©ï¼šç”¨äºŽä¼˜åŒ–è§†è§‰æ•ˆæžœï¼Œéžæ’­æ”¾çŠ¶æ€ä¸‹æ˜¾ç¤º -->
                    <Rectangle fx:id="blackMask"
                               width="${mediaContainer.width}"
                               height="${mediaContainer.height}"
                               fill="black"
                               visible="false"/>
                    <!-- èƒŒæ™¯å›¾ç‰‡ï¼šæ— åª’ä½“æ’­æ”¾æ—¶æ˜¾ç¤ºçš„é»˜è®¤èƒŒæ™¯ -->
                    <ImageView fx:id="bgImage"
                               preserveRatio="true"
                               pickOnBounds="false"
                               fitWidth="0"
                               fitHeight="0"/>
                    <!-- ä¸­å¿ƒæ’­æ”¾æŒ‰é’®ï¼šæ‚¬æµ®åœ¨åª’ä½“åŒºåŸŸä¸­å¤®çš„å¤§åž‹æ’­æ”¾è§¦å‘æŒ‰é’® -->
                    <Polygon fx:id="centerPlayIcon"
                             points="0.0,0.0, 0.0,60.0, 80.0,30.0"
                             fill="rgba(255,255,255,0.7)"
                             smooth="true"
                             visible="false"
                             StackPane.alignment="CENTER"/>
                </children>
            </StackPane>

            <!-- æŠ˜å å¼æ’­æ”¾åˆ—è¡¨å®¹å™¨ï¼šæ•´åˆFXML2åº•éƒ¨æ“ä½œæŒ‰é’®ï¼Œé»˜è®¤éšè— -->
            <VBox fx:id="playlistContainer"
                  prefWidth="280.0"
                  minWidth="0"
                  maxWidth="280.0"
                  StackPane.alignment="CENTER_RIGHT"
                  visible="false">
                <children>
                    <!-- æ’­æ”¾åˆ—è¡¨æ ‡é¢˜æ ï¼šæ˜¾ç¤ºæ ‡é¢˜å’Œåª’ä½“æ•°é‡ç»Ÿè®¡ -->
                    <HBox alignment="CENTER_LEFT">
                        <padding>
                            <Insets top="8" right="10" bottom="8" left="10"/>
                        </padding>
                        <children>
                            <Label text="ðŸŽµ æ’­æ”¾åˆ—è¡¨"/>
                            <HBox HBox.hgrow="ALWAYS"/>
                            <Label fx:id="playlistCountLabel"
                                   text="0 é¦–"/>
                        </children>
                    </HBox>

                    <!-- æ’­æ”¾åˆ—è¡¨æœç´¢æ¡†ï¼šç”¨äºŽç­›é€‰åˆ—è¡¨ä¸­çš„åª’ä½“æ–‡ä»¶ -->
                    <HBox alignment="CENTER">
                        <padding>
                            <Insets top="5" right="10" bottom="5" left="10"/>
                        </padding>
                        <children>
                            <TextField fx:id="searchField"
                                       promptText="æœç´¢..."
                                       prefWidth="260.0"/>
                        </children>
                    </HBox>

                    <!-- æ’­æ”¾åˆ—è¡¨è§†å›¾ï¼šæ˜¾ç¤ºæ‰€æœ‰æ·»åŠ çš„åª’ä½“æ–‡ä»¶ï¼Œæ”¯æŒç‚¹å‡»æ’­æ”¾ -->
                    <ListView fx:id="playlistView"
                              VBox.vgrow="ALWAYS">
                        <!-- åˆ—è¡¨å ä½ç¬¦ï¼šåˆ—è¡¨ä¸ºç©ºæ—¶æ˜¾ç¤ºçš„æç¤ºæ–‡æœ¬ -->
                        <placeholder>
                            <Label text="æ’­æ”¾åˆ—è¡¨ä¸ºç©º">
                                <padding>
                                    <Insets top="20" right="20" bottom="20" left="20"/>
                                </padding>
                            </Label>
                        </placeholder>
                    </ListView>

                    <!-- FXML2æ–°å¢žï¼šæ’­æ”¾åˆ—è¡¨åº•éƒ¨æ“ä½œæŒ‰é’®ï¼ˆç§»é™¤/æ¸…ç©ºæŒ‰é’®è¿ç§»è‡³æ­¤ï¼‰ -->
                    <HBox fx:id="playlistActionBox"
                          spacing="8.0"
                          alignment="CENTER">
                        <padding>
                            <Insets top="8" right="10" bottom="8" left="10"/>
                        </padding>
                        <children>
                            <Button fx:id="removeFromPlaylistBtn"
                                    text="âž– ç§»é™¤é€‰ä¸­"
                                    prefWidth="100.0"
                                    prefHeight="30.0"/>
                            <Button fx:id="clearPlaylistBtn"
                                    text="ðŸ—‘ï¸ æ¸…ç©ºåˆ—è¡¨"
                                    prefWidth="100.0"
                                    prefHeight="30.0"/>
                        </children>
                    </HBox>
                </children>
            </VBox>
        </StackPane>
    </center>

    <!-- åº•éƒ¨æŽ§åˆ¶æ ï¼šä¿ç•™FXML1ç»“æž„ï¼Œæ•´åˆFXML2å¸ƒå±€åˆç†æ€§ï¼Œç§»é™¤å†²çªå†…è”æ ·å¼ -->
    <bottom>
        <VBox fx:id="bottomContainer"
              spacing="2.0">
            <!-- è¿›åº¦æ¡ä¸Žæ—¶é•¿æ˜¾ç¤ºå®¹å™¨ï¼šå±•ç¤ºæ’­æ”¾è¿›åº¦å’Œå½“å‰/æ€»æ—¶é•¿ -->
            <HBox fx:id="progressContainer"
                  spacing="8.0"
                  alignment="CENTER_LEFT">
                <padding>
                    <Insets top="2" right="10" bottom="2" left="10"/>
                </padding>
                <children>
                    <!-- å½“å‰æ’­æ”¾æ—¶é•¿æ˜¾ç¤ºå®¹å™¨ -->
                    <HBox prefWidth="50.0" alignment="CENTER_RIGHT">
                        <Text fx:id="currentTimeLabel" text="00:00" id="timeLabel"/>
                    </HBox>
                    <!-- æ’­æ”¾åˆ—è¡¨å±•å¼€/æŠ˜å åˆ‡æ¢æŒ‰é’® -->
                    <Slider fx:id="progressSlider"
                            min="0.0"
                            max="1.0"
                            value="0.0"
                            HBox.hgrow="ALWAYS"
                            minWidth="0.0"/>
                    <!-- åª’ä½“æ€»æ—¶é•¿æ˜¾ç¤ºå®¹å™¨ -->
                    <HBox prefWidth="50.0" alignment="CENTER_LEFT">
                        <Text fx:id="totalTimeLabel" text="00:00" id="timeLabel"/>
                    </HBox>
                </children>
            </HBox>

            <!-- æ’­æ”¾æŽ§åˆ¶æŒ‰é’®å®¹å™¨ï¼šåŒ…å«æ’­æ”¾ã€åˆ‡æ­Œã€å€é€Ÿã€éŸ³é‡æŽ§åˆ¶ -->
            <StackPane fx:id="bottomNavi"
                       prefHeight="40.0"
                       minHeight="40.0">
                <padding>
                    <Insets top="5.0" right="20.0" bottom="5.0" left="20.0"/>
                </padding>

                <!-- æ ¸å¿ƒæ’­æ”¾æŽ§åˆ¶æŒ‰é’®ç»„ï¼šä¸Šä¸€é¦–ã€åŽé€€ã€æ’­æ”¾/æš‚åœã€å¿«è¿›ã€ä¸‹ä¸€é¦– -->
                <HBox fx:id="playControlBox"
                      spacing="8.0"
                      alignment="CENTER"
                      StackPane.alignment="CENTER"
                      layoutX="-40.0">
                    <Button fx:id="prevMediaBtn"
                            prefWidth="40.0"
                            prefHeight="30.0"
                            alignment="CENTER"/>

                    <Button fx:id="rewindBtn"
                            prefWidth="40.0"
                            prefHeight="30.0"
                            alignment="CENTER"/>

                    <Button fx:id="playPauseBtn"
                            prefWidth="50.0"
                            prefHeight="30.0"
                            alignment="CENTER"/>

                    <Button fx:id="forwardBtn"
                            prefWidth="40.0"
                            prefHeight="30.0"
                            alignment="CENTER"/>

                    <Button fx:id="nextMediaBtn"
                            prefWidth="40.0"
                            prefHeight="30.0"
                            alignment="CENTER"/>
                </HBox>

                <!-- æ’­æ”¾å€é€Ÿè°ƒæ•´æŒ‰é’®ï¼šç‚¹å‡»å¼¹å‡ºå€é€Ÿé€‰æ‹©èœå• -->
                <Button fx:id="speedBtn"
                        prefWidth="60.0"
                        prefHeight="30.0"
                        alignment="CENTER"
                        StackPane.alignment="CENTER_LEFT"
                        layoutX="80.0"/>

                <!-- éŸ³é‡è°ƒèŠ‚æ»‘å—å®¹å™¨ï¼šæŽ§åˆ¶åª’ä½“æ’­æ”¾éŸ³é‡å¤§å° -->
                <HBox alignment="CENTER_RIGHT"
                      StackPane.alignment="CENTER_RIGHT"
                      prefWidth="100.0"
                      maxWidth="100.0">
                    <children>
                        <Slider fx:id="volumeSlider"
                                min="0.0"
                                max="1.0"
                                value="0.5"
                                prefWidth="100.0"/>
                    </children>
                </HBox>
            </StackPane>
        </VBox>
    </bottom>
</BorderPane>
